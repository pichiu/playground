<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>心願展示牆 - Option L: Nebula 星雲綻放</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Noto Sans TC', sans-serif;
      background: #050508;
      min-height: 100vh;
      overflow: hidden;
    }

    canvas { position: fixed; inset: 0; z-index: 1; }

    .wishes {
      position: fixed;
      inset: 0;
      z-index: 50;
      pointer-events: none;
    }

    .wish {
      position: absolute;
      max-width: 480px;
      font-size: 1.4rem;
      font-weight: 300;
      line-height: 1.9;
      text-align: center;
      letter-spacing: 0.06em;
      color: rgba(255, 255, 255, 0.92);
      opacity: 0;
      animation: rise 16s ease-out forwards;
    }

    /* Each wish has unique nebula color */
    .wish.nebula-pink {
      text-shadow:
        0 0 20px rgba(255, 100, 150, 0.6),
        0 0 40px rgba(255, 50, 120, 0.4),
        0 0 80px rgba(200, 50, 100, 0.3);
    }
    .wish.nebula-blue {
      text-shadow:
        0 0 20px rgba(100, 150, 255, 0.6),
        0 0 40px rgba(80, 120, 255, 0.4),
        0 0 80px rgba(50, 100, 200, 0.3);
    }
    .wish.nebula-purple {
      text-shadow:
        0 0 20px rgba(180, 100, 255, 0.6),
        0 0 40px rgba(150, 80, 255, 0.4),
        0 0 80px rgba(120, 50, 200, 0.3);
    }
    .wish.nebula-teal {
      text-shadow:
        0 0 20px rgba(100, 255, 200, 0.6),
        0 0 40px rgba(50, 220, 180, 0.4),
        0 0 80px rgba(30, 180, 150, 0.3);
    }
    .wish.nebula-gold {
      text-shadow:
        0 0 20px rgba(255, 200, 100, 0.6),
        0 0 40px rgba(255, 180, 50, 0.4),
        0 0 80px rgba(200, 150, 30, 0.3);
    }

    @keyframes rise {
      0% { bottom: -8%; opacity: 0; filter: blur(4px); transform: translateX(-50%) scale(0.95); }
      8% { opacity: 1; filter: blur(0); transform: translateX(-50%) scale(1); }
      90% { opacity: 1; filter: blur(0); }
      100% { bottom: 105%; opacity: 0; filter: blur(3px); transform: translateX(-50%) scale(1.02); }
    }

    .wish.drift-1 { animation: rise 16s ease-out forwards, drift1 9s ease-in-out infinite; }
    .wish.drift-2 { animation: rise 17s ease-out forwards, drift2 8s ease-in-out infinite; }
    .wish.drift-3 { animation: rise 15s ease-out forwards, drift3 10s ease-in-out infinite; }

    @keyframes drift1 { 0%, 100% { margin-left: 0; } 50% { margin-left: 18px; } }
    @keyframes drift2 { 0%, 100% { margin-left: 0; } 50% { margin-left: -15px; } }
    @keyframes drift3 { 0%, 100% { margin-left: 0; } 50% { margin-left: 12px; } }

    .stats {
      position: fixed;
      bottom: 50px;
      left: 50px;
      z-index: 100;
      color: rgba(255, 255, 255, 0.6);
      font-size: 2.5rem;
      font-weight: 300;
      text-shadow: 0 0 30px rgba(180, 100, 255, 0.5);
    }
    .stats-label {
      font-size: 0.7rem;
      letter-spacing: 0.4em;
      margin-top: 8px;
      opacity: 0.5;
    }

    .qr-section {
      position: fixed;
      bottom: 50px;
      right: 50px;
      z-index: 100;
      display: flex;
      align-items: center;
      gap: 16px;
    }
    .qr-text {
      font-size: 0.8rem;
      color: rgba(255, 255, 255, 0.4);
      letter-spacing: 0.2em;
    }
    .qr-glow {
      width: 100px;
      height: 100px;
      padding: 8px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      box-shadow: 0 0 40px rgba(180, 100, 255, 0.2);
    }
    .qr-code { width: 100%; height: 100%; background: white; border-radius: 4px; }
  </style>
</head>
<body>
  <canvas id="canvas"></canvas>
  <div class="wishes" id="wishes"></div>

  <div class="stats">
    <div id="count">1,247</div>
    <div class="stats-label">WISHES IN THE COSMOS</div>
  </div>

  <div class="qr-section">
    <span class="qr-text">SCAN</span>
    <div class="qr-glow">
      <div class="qr-code">
        <svg viewBox="0 0 100 100"><rect width="100" height="100" fill="white"/><rect x="10" y="10" width="25" height="25" fill="#050508"/><rect x="13" y="13" width="19" height="19" fill="white"/><rect x="16" y="16" width="13" height="13" fill="#050508"/><rect x="65" y="10" width="25" height="25" fill="#050508"/><rect x="68" y="13" width="19" height="19" fill="white"/><rect x="71" y="16" width="13" height="13" fill="#050508"/><rect x="10" y="65" width="25" height="25" fill="#050508"/><rect x="13" y="68" width="19" height="19" fill="white"/><rect x="16" y="71" width="13" height="13" fill="#050508"/><rect x="40" y="40" width="20" height="20" fill="#050508"/><rect x="45" y="45" width="10" height="10" fill="white"/></svg>
      </div>
    </div>
  </div>

  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    let particles = [];

    function resize() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    resize();
    window.addEventListener('resize', resize);

    // Nebula color palettes
    const palettes = [
      { h: 330, s: 80, l: 60 }, // pink
      { h: 220, s: 80, l: 60 }, // blue
      { h: 270, s: 70, l: 60 }, // purple
      { h: 170, s: 70, l: 55 }, // teal
      { h: 40, s: 90, l: 60 },  // gold
    ];

    class NebulaParticle {
      constructor() {
        this.reset();
      }

      reset() {
        this.x = Math.random() * canvas.width;
        this.y = canvas.height + 50;
        this.size = Math.random() * 100 + 30;
        this.speedY = Math.random() * 0.4 + 0.15;
        this.speedX = (Math.random() - 0.5) * 0.2;
        this.palette = palettes[Math.floor(Math.random() * palettes.length)];
        this.opacity = 0;
        this.maxOpacity = Math.random() * 0.15 + 0.05;
        this.pulse = Math.random() * Math.PI * 2;
        this.pulseSpeed = Math.random() * 0.01 + 0.005;
      }

      update() {
        this.y -= this.speedY;
        this.x += this.speedX + Math.sin(this.y * 0.003) * 0.3;
        this.pulse += this.pulseSpeed;

        if (this.y > canvas.height * 0.85) {
          this.opacity = Math.min(this.opacity + 0.003, this.maxOpacity);
        } else if (this.y < canvas.height * 0.15) {
          this.opacity -= 0.003;
        }

        this.currentOpacity = this.opacity * (0.7 + 0.3 * Math.sin(this.pulse));

        if (this.y < -this.size || this.opacity <= 0) this.reset();
      }

      draw() {
        if (this.currentOpacity <= 0) return;

        const gradient = ctx.createRadialGradient(
          this.x, this.y, 0,
          this.x, this.y, this.size
        );
        const { h, s, l } = this.palette;
        gradient.addColorStop(0, `hsla(${h}, ${s}%, ${l}%, ${this.currentOpacity})`);
        gradient.addColorStop(0.4, `hsla(${h}, ${s - 10}%, ${l - 10}%, ${this.currentOpacity * 0.5})`);
        gradient.addColorStop(1, 'transparent');

        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fillStyle = gradient;
        ctx.fill();
      }
    }

    // Stars
    class Star {
      constructor() {
        this.x = Math.random() * canvas.width;
        this.y = Math.random() * canvas.height;
        this.size = Math.random() * 1.5 + 0.5;
        this.twinkle = Math.random() * Math.PI * 2;
        this.speed = Math.random() * 0.03 + 0.01;
      }

      update() {
        this.twinkle += this.speed;
      }

      draw() {
        const opacity = 0.3 + 0.4 * Math.sin(this.twinkle);
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(255, 255, 255, ${opacity})`;
        ctx.fill();
      }
    }

    // Initialize
    for (let i = 0; i < 50; i++) {
      const p = new NebulaParticle();
      p.y = Math.random() * canvas.height;
      p.opacity = p.maxOpacity;
      particles.push(p);
    }

    const stars = [];
    for (let i = 0; i < 200; i++) stars.push(new Star());

    function animate() {
      ctx.fillStyle = 'rgba(5, 5, 8, 0.1)';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      stars.forEach(s => { s.update(); s.draw(); });
      particles.forEach(p => { p.update(); p.draw(); });

      requestAnimationFrame(animate);
    }
    animate();

    // Wishes
    const wishes = [
      '希望能看見宇宙的盡頭',
      '願我的家人平安健康',
      '想要在星空下露營一整夜',
      '希望能找到靈魂伴侶',
      '願人類能和平探索宇宙',
      '希望夢想能像星星一樣閃耀',
      '想要學會天文攝影',
      '願我有勇氣追逐星辰大海',
      '希望能帶家人去看銀河',
      '願每個人都能找到自己的星座',
    ];

    const columns = ['10%', '28%', '50%', '72%', '90%'];
    const nebulas = ['nebula-pink', 'nebula-blue', 'nebula-purple', 'nebula-teal', 'nebula-gold'];
    const drifts = ['drift-1', 'drift-2', 'drift-3'];
    let wishIndex = 0, colIndex = 0;

    function addWish() {
      const container = document.getElementById('wishes');
      const wish = document.createElement('div');
      const nebula = nebulas[Math.floor(Math.random() * nebulas.length)];
      const drift = drifts[Math.floor(Math.random() * drifts.length)];
      wish.className = `wish ${nebula} ${drift}`;
      wish.textContent = wishes[wishIndex % wishes.length];
      wish.style.left = columns[colIndex % columns.length];

      container.appendChild(wish);
      setTimeout(() => wish.remove(), 17000);

      wishIndex++;
      colIndex++;
    }

    columns.forEach((_, i) => setTimeout(addWish, i * 1000));
    setInterval(addWish, 3000);

    setInterval(() => {
      const el = document.getElementById('count');
      el.textContent = (parseInt(el.textContent.replace(',', '')) + 1).toLocaleString();
    }, 10000);
  </script>
</body>
</html>
